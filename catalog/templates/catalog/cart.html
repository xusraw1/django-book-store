{% extends 'catalog/base.html' %}
{% block content %}
<style>
    /* –£–ª—É—á—à–∞–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –Ω–∞ –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö */
    @media (max-width: 768px) {
        .table-responsive table {
            font-size: 14px;
            /* –£–º–µ–Ω—å—à–∞–µ–º —Ç–µ–∫—Å—Ç */
        }

        .table th,
        .table td {
            padding: 8px;
            /* –£–º–µ–Ω—å—à–∞–µ–º –æ—Ç—Å—Ç—É–ø—ã */
        }

        .btn {
            font-size: 12px;
            /* –£–º–µ–Ω—å—à–∞–µ–º –∫–Ω–æ–ø–∫–∏ */
            padding: 5px 8px;
        }
    }

    /* –î–µ–ª–∞–µ–º –∫–æ—Ä–∑–∏–Ω—É —É–¥–æ–±–Ω–µ–µ –Ω–∞ –æ—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö */
    @media (max-width: 576px) {
        .table thead {
            display: none;
            /* –°–∫—Ä—ã–≤–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–∫–∏ —Ç–∞–±–ª–∏—Ü—ã */
        }

        .table tbody tr {
            display: flex;
            flex-direction: column;
            border: 1px solid #ddd;
            margin-bottom: 10px;
            padding: 10px;
        }

        .table td {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
    }
</style>

<div class="container my-5">
    <h1 class="mb-4 text-center">üõí –í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞</h1>

    {% if cart %}
    <div class="table-responsive">
        <table class="table table-primary align-middle text-center">
            <thead class="table-dark">
                <tr>
                    <th>#</th>
                    <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                    <th>–¶–µ–Ω–∞</th>
                    <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
                    <th>–ò—Ç–æ–≥–æ</th>
                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                </tr>
            </thead>
            <tbody>
                {% for book, item in cart.items %}
                <tr>
                    <td>{{ forloop.counter }}</td>
                    <td><a href="{% url 'book_detail' book_id=book %}">{{ item.title }}</a></td>
                    <td>{{ item.price }}$</td>
                    <td>
                        <a href="{% url 'update_cart' book 'decrease' %}" class="btn btn-outline-secondary">‚àí</a>
                        <span class="mx-2">{{ item.quantity }}</span>
                        <a href="{% url 'update_cart' book 'increase' %}" class="btn btn-outline-secondary">+</a>
                    </td>
                    <td>{{ item.item_total }}$</td>
                    <td>
                        <a href="{% url 'remove_from_cart' book %}" class="btn btn-danger">–£–¥–∞–ª–∏—Ç—å</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="text-end mt-4">
        <h4 class="text-danger fw-bold">–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: <span id="total-price">{{ total }}$</span></h4>
    </div>

    <div class="d-flex justify-content-between mt-4">
        <a href="{% url 'book_list' %}" class="btn btn-secondary">üõç –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–∫—É–ø–∫–∏</a>
        <a href="{% url 'checkout' %}" class="btn btn-primary">‚úÖ –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</a>
    </div>
    {% else %}
    <div class="alert alert-warning text-center">–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞ üòî</div>
    <div class="text-center">
        <a href="{% url 'book_list' %}" class="btn btn-success">üîô –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –∫–∞—Ç–∞–ª–æ–≥</a>
    </div>
    {% endif %}

    {% if random_books %}
    <div class="container mt-5">
        <h3 class="mb-4 text-center">üìö –í–∞–º –º–æ–∂–µ—Ç –ø–æ–Ω—Ä–∞–≤–∏—Ç—å—Å—è</h3>
        <div class="row">
            {% for book in random_books %}
            <div class="col-sm-6 col-md-4 col-lg-3 mb-4"> <!-- –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å -->
                <div class="card h-100 shadow-sm">
                    <img src="{{ book.image.url }}" class="card-img-top" alt="{{ book.title }}"
                        style="height: 300px; object-fit: cover;"> <!-- –£–º–µ–Ω—å—à–∏–ª –∫–∞—Ä—Ç–∏–Ω–∫—É -->
                    <div class="card-body d-flex flex-column text-center">
                        <h6 class="card-title"><a href="{% url 'book_detail' book.id %}">{{ book.title }}</a></h6>
                        <div class="btn-group mt-auto" role="group">
                            <span class="btn btn-light fw-bold fs-6">{{ book.price }}$</span>
                            <a href="{% url 'add_to_cart' book.id %}" class="btn btn-outline-success">–í –∫–æ—Ä–∑–∏–Ω—É</a>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}
</div>



{% endblock %}